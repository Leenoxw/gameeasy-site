---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { gamesData } from '../data/games.js'; // Importation de la source unique

export function getStaticPaths() {
  // On utilise les données centralisées pour générer toutes les pages d'un coup
  return gamesData.map(game => ({
    params: { id: game.id },
    props: { game } // On passe l'objet game entier en prop
  }));
}

const { id } = Astro.params;
const { game } = Astro.props;
const { title, cat, image, desc, min, rec } = game;
---

<Layout title={`${title} - GAMEASY`}>
  <Header />
  <main class="detail-page">
    <div class="container">
      <a href="/gameeasy-site/cracks" class="back-link">
        <i class="fas fa-arrow-left"></i> Retour au catalogue
      </a>
      
      <section class="hero-section">
        <div class="image-wrapper">
          <img src={image} alt={title} class="hero-image" />
        </div>
        <div class="hero-info">
          <span class="category-tag">{cat}</span>
          <h1>{title}</h1>
          <p class="description">{desc}</p>
          
          <div class="dl-area">
              <a href={`/gameeasy-site/download?id=${id}`} class="download-button">
                <i class="fas fa-download"></i> TÉLÉCHARGER LE CRACK
              </a>
              <div class="file-badges">
                <span><i class="fas fa-file-archive"></i> .ZIP / .ISO</span>
                <span><i class="fas fa-shield-alt"></i> SANS VIRUS</span>
                <span><i class="fas fa-key"></i> MDP: online-fix.me</span>
              </div>
          </div>
        </div>
      </section>

      <section class="system-config">
        <div class="config-header">
            <i class="fas fa-microchip"></i>
            <h2>Configuration Requise</h2>
        </div>

        <div class="config-grid">
            <div class="config-box minimal">
                <h3><span class="status-dot"></span> MINIMALE</h3>
                <ul>
                    <li><small>Système</small> <strong>{min.os}</strong></li>
                    <li><small>Processeur</small> <strong>{min.cpu}</strong></li>
                    <li><small>Mémoire</small> <strong>{min.ram}</strong></li>
                    <li><small>Graphiques</small> <strong>{min.gpu}</strong></li>
                    <li><small>DirectX</small> <strong>{min.dx}</strong></li>
                    <li><small>Espace disque</small> <strong>{min.storage}</strong></li>
                </ul>
            </div>

            <div class="config-box recommended">
                <h3><span class="status-dot"></span> RECOMMANDÉE</h3>
                <ul>
                    <li><small>Système</small> <strong>{rec.os}</strong></li>
                    <li><small>Processeur</small> <strong>{rec.cpu}</strong></li>
                    <li><small>Mémoire</small> <strong>{rec.ram}</strong></li>
                    <li><small>Graphiques</small> <strong>{rec.gpu}</strong></li>
                    <li><small>DirectX</small> <strong>{rec.dx}</strong></li>
                    <li><small>Espace disque</small> <strong>{rec.storage}</strong></li>
                </ul>
            </div>
        </div>
      </section>
    </div>
  </main>
  <Footer />
</Layout>

<style>
  .detail-page { padding: 140px 20px 80px; background: #060612; min-height: 100vh; color: white; }
  .container { max-width: 1200px; margin: 0 auto; }
  
  .back-link { 
    color: #8a4fff; text-decoration: none; display: flex; 
    align-items: center; gap: 8px; margin-bottom: 40px; 
    font-weight: 600; transition: 0.3s; 
  }
  .back-link:hover { color: #fff; transform: translateX(-5px); }

  .hero-section { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; margin-bottom: 80px; align-items: center; }
  
  .image-wrapper { 
    border-radius: 24px; overflow: hidden; 
    box-shadow: 0 20px 50px rgba(0,0,0,0.5); 
    border: 1px solid rgba(255,255,255,0.05); aspect-ratio: 16/9; 
  }
  .hero-image { width: 100%; height: 100%; object-fit: cover; }

  .category-tag { color: #8a4fff; font-weight: 800; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; }
  
  h1 { font-size: 4rem; font-weight: 900; margin: 15px 0; line-height: 1; letter-spacing: -2px; }
  
  .description { color: #a1a1aa; line-height: 1.7; font-size: 1.1rem; margin-bottom: 40px; }
  
  .dl-area { background: #11111e; padding: 30px; border-radius: 20px; border: 1px solid #1e1e2e; }
  
  .download-button { 
    display: flex; align-items: center; justify-content: center; gap: 12px; 
    width: 100%; padding: 22px; background: #8a4fff; color: white; 
    text-decoration: none; font-weight: 900; border-radius: 14px; 
    font-size: 1.2rem; transition: 0.4s; 
  }
  .download-button:hover { background: #9d6fff; transform: translateY(-5px); box-shadow: 0 10px 20px rgba(138, 79, 255, 0.2); }
  
  .file-badges { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
  .file-badges span { font-size: 0.75rem; color: #555; font-weight: 700; display: flex; align-items: center; gap: 6px; }

  .system-config { background: #0c0c1d; border-radius: 30px; padding: 50px; border: 1px solid #1a1a2e; }
  .config-header { display: flex; align-items: center; gap: 15px; margin-bottom: 40px; }
  .config-header h2 { font-size: 2rem; font-weight: 900; }
  
  .config-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
  .config-box { background: rgba(0,0,0,0.2); padding: 35px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.03); }
  
  .status-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 10px; }
  .minimal h3 { color: #ff4757; margin-bottom: 25px; }
  .minimal .status-dot { background: #ff4757; box-shadow: 0 0 10px #ff4757; }
  
  .recommended h3 { color: #2ed573; margin-bottom: 25px; }
  .recommended .status-dot { background: #2ed573; box-shadow: 0 0 10px #2ed573; }
  
  ul { list-style: none; padding: 0; }
  li { margin-bottom: 18px; display: flex; flex-direction: column; gap: 4px; }
  li small { color: #555; text-transform: uppercase; font-size: 0.7rem; font-weight: 800; }
  li strong { color: #ddd; font-size: 1rem; }

  @media (max-width: 900px) { 
    .hero-section, .config-grid { grid-template-columns: 1fr; } 
    h1 { font-size: 3rem; } 
    .detail-page { padding-top: 100px; }
  }
</style>