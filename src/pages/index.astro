---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

const featuredGames = [
  { id: 'black-myth-wukong', title: "Wukong", image: "/gameeasy-site/images/wukong.jpg", cat: "Action / RPG" },
  { id: 'cyberpunk-2077', title: "Cyberpunk 2077", image: "/gameeasy-site/images/cyberpunk.jpg", cat: "Sci-Fi" },
  { id: 'elden-ring', title: "Elden Ring", image: "/gameeasy-site/images/elden-ring.jpg", cat: "Fantasy" },
  { id: 'gta-v', title: "GTA V", image: "/gameeasy-site/images/gta5.jpg", cat: "Open World" }
];

const latestCracks = [
    { id: 'black-myth-wukong', title: "Black Myth: Wukong", version: "v1.0.8", time: "2h ago", img: "/gameeasy-site/images/wukong.jpg" },
    { id: 'elden-ring', title: "Elden Ring", version: "v1.12.3", time: "5h ago", img: "/gameeasy-site/images/elden-ring.jpg" },
    { id: 'gta-v', title: "GTA V", version: "v3258.0", time: "Hier", img: "/gameeasy-site/images/gta5.jpg" },
    { id: 'cyberpunk-2077', title: "Cyberpunk 2077", version: "v2.12 HF", time: "Hier", img: "/gameeasy-site/images/cyberpunk.jpg" },
];
---

<Layout title="GAMEASY - L'élite du Gaming Gratuit">
  <Header />

  <main class="home-wrapper">
    <section class="hero">
      <div class="hero-bg-glow"></div>
      <div class="container hero-flex">
        <div class="hero-text-content">
          <div class="badge-new">✨ NOUVELLE VERSION 2.0 DISPONIBLE</div>
          <h1 class="main-title">
            VOS JEUX <br />
            <span class="outline-text">PRÉFÉRÉS</span> <br />
            <span class="gradient-text">GRATUITEMENT</span>
          </h1>
          <p class="subtitle">Accédez à la plus grande bibliothèque de jeux crackés. Sécurisé, rapide et mis à jour quotidiennement.</p>
          <div class="hero-btns">
            <a href="/gameeasy-site/cracks" class="btn-primary">EXPLORER LE CATALOGUE</a>
            <a href="/gameeasy-site/tuto" class="btn-secondary">VOIR LE TUTO</a>
          </div>
        </div>
        <div class="hero-visual">
            <div class="floating-card card-1"><img src="/gameeasy-site/images/wukong.jpg" /></div>
            <div class="floating-card card-2"><img src="/gameeasy-site/images/cyberpunk.jpg" /></div>
        </div>
      </div>
    </section>

    <section class="search-section">
        <div class="container">
            <div class="search-wrapper">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="gameSearch" placeholder="Rechercher un jeu (ex: GTA V, Wukong...)" />
                    <button class="search-btn">RECHERCHER</button>
                </div>
                <div class="search-filters">
                    <span class="filter-label">Filtres :</span>
                    <button class="chip active">Tous</button>
                    <button class="chip">Action</button>
                    <button class="chip">RPG</button>
                    <button class="chip">Horreur</button>
                </div>
            </div>
        </div>
    </section>

    <section class="main-grid-section">
      <div class="container grid-layout">
        
        <div class="popular-column">
          <div class="section-header">
            <div>
              <span class="small-label">TOP DOWNLOADS</span>
              <h2>LES PLUS <span class="purple">POPULAIRES</span></h2>
            </div>
          </div>
          
          <div class="game-grid">
            {featuredGames.map(game => (
              <a href={`/gameeasy-site/${game.id}`} class="game-card">
                <div class="card-inner">
                  <img src={game.image} alt={game.title} class="game-img" />
                  <div class="card-content">
                    <span class="game-cat">{game.cat}</span>
                    <h3>{game.title}</h3>
                    <div class="card-footer">
                      <span class="status"><i class="fas fa-check-circle"></i> Vérifié</span>
                      <span class="dl-icon"><i class="fas fa-download"></i></span>
                    </div>
                  </div>
                </div>
              </a>
            ))}
          </div>
        </div>

        <aside class="sidebar">
          <div class="sidebar-box">
            <div class="sidebar-header">
                <span class="small-label">RECENT</span>
                <h3>DERNIERS <span class="purple">AJOUTS</span></h3>
            </div>
            <div class="latest-list">
                {latestCracks.map(crack => (
                    <a href={`/gameeasy-site/${crack.id}`} class="latest-item">
                        <div class="latest-thumb"><img src={crack.img} alt="" /></div>
                        <div class="latest-info">
                            <h4>{crack.title}</h4>
                            <div class="latest-meta">
                                <span class="time">{crack.time}</span>
                                <span class="version">{crack.version}</span>
                            </div>
                        </div>
                    </a>
                ))}
            </div>
            <a href="/gameeasy-site/cracks" class="btn-sidebar">Tout voir</a>
          </div>

          <div class="discord-card">
              <i class="fab fa-discord"></i>
              <h4>Rejoignez la commu</h4>
              <p>Besoin d'aide ? Rejoignez-nous sur Discord.</p>
              <a href="#" class="btn-discord">Rejoindre</a>
          </div>
        </aside>

      </div>
    </section>
  </main>

  <Footer />
</Layout>

<style>
    /* --- VARIABLES & BASE --- */
    :root {
        --primary-purple: #8a4fff;
        --dark-bg: #060612;
        --glass-bg: rgba(255, 255, 255, 0.05);
        --text-gray: #888;
    }

    body {
        margin: 0;
        font-family: 'Segoe UI', system-ui, sans-serif;
        background-color: var(--dark-bg);
        color: white;
    }

    .container { max-width: 1300px; margin: 0 auto; padding: 0 20px; }
    .purple { color: var(--primary-purple); }
    .small-label { color: var(--primary-purple); font-weight: 900; font-size: 0.7rem; letter-spacing: 2px; text-transform: uppercase; }

    /* --- GRADIENT TEXT --- */
    .gradient-text {
        background: linear-gradient(to right, #ffffff 30%, var(--primary-purple));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    .outline-text {
        color: transparent;
        -webkit-text-stroke: 1px rgba(255,255,255,0.5);
    }

    /* --- HERO SECTION --- */
    .hero {
        min-height: 85vh;
        display: flex;
        align-items: center;
        position: relative;
        overflow: hidden;
        padding-top: 60px;
    }

    .hero-bg-glow {
        position: absolute; top: -10%; right: -10%; width: 600px; height: 600px;
        background: var(--primary-purple); filter: blur(180px); opacity: 0.15; z-index: 0;
    }

    .hero-flex { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 40px; align-items: center; z-index: 1; }
    
    .badge-new {
        background: rgba(138, 79, 255, 0.1); color: var(--primary-purple);
        padding: 8px 16px; border-radius: 50px; font-size: 0.75rem; font-weight: 800;
        border: 1px solid rgba(138, 79, 255, 0.2); margin-bottom: 25px; display: inline-block;
    }

    .main-title { font-size: clamp(3rem, 7vw, 5.5rem); font-weight: 950; line-height: 0.95; letter-spacing: -2px; margin-bottom: 25px; }
    .subtitle { font-size: 1.2rem; color: var(--text-gray); max-width: 500px; margin-bottom: 40px; line-height: 1.6; }

    .hero-btns { display: flex; gap: 15px; }
    .btn-primary {
        background: var(--primary-purple); color: white; padding: 18px 35px; border-radius: 14px;
        font-weight: 800; box-shadow: 0 10px 30px rgba(138, 79, 255, 0.3); transition: 0.3s;
    }
    .btn-secondary {
        background: var(--glass-bg); color: white; padding: 18px 35px; border-radius: 14px;
        font-weight: 800; border: 1px solid rgba(255,255,255,0.1); transition: 0.3s;
    }
    .btn-primary:hover { transform: translateY(-5px); }

    .hero-visual { position: relative; height: 400px; }
    .floating-card { position: absolute; width: 280px; border-radius: 20px; overflow: hidden; border: 1px solid rgba(138, 79, 255, 0.3); box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
    .floating-card img { width: 100%; display: block; }
    .card-1 { z-index: 2; top: 0; right: 0; transform: rotate(5deg); }
    .card-2 { z-index: 1; bottom: 20px; left: 0; transform: rotate(-8deg); opacity: 0.4; }

    /* --- SEARCH BAR --- */
    .search-wrapper { margin-top: -30px; margin-bottom: 60px; position: relative; z-index: 10; }
    .search-box {
        background: rgba(12, 12, 29, 0.8); backdrop-filter: blur(20px);
        border: 1px solid rgba(138, 79, 255, 0.3); border-radius: 20px;
        padding: 10px 10px 10px 25px; display: flex; align-items: center; gap: 15px;
    }
    .search-box input { background: transparent; border: none; color: white; font-size: 1.1rem; width: 100%; outline: none; }
    .search-btn { background: var(--primary-purple); border: none; color: white; padding: 12px 25px; border-radius: 14px; font-weight: 800; cursor: pointer; }

    .search-filters { display: flex; gap: 10px; margin-top: 20px; align-items: center; }
    .filter-label { font-size: 0.8rem; color: #444; font-weight: 800; }
    .chip { background: var(--glass-bg); border: 1px solid rgba(255,255,255,0.05); color: #888; padding: 6px 15px; border-radius: 50px; cursor: pointer; }
    .chip.active { border-color: var(--primary-purple); color: white; background: rgba(138, 79, 255, 0.1); }

    /* --- CONTENT GRID --- */
    .grid-layout { display: grid; grid-template-columns: 1fr 380px; gap: 50px; padding-bottom: 100px; }
    
    .game-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 25px; }
    .card-inner { background: #0c0c1d; border-radius: 24px; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); transition: 0.4s; }
    .game-img { width: 100%; aspect-ratio: 16/10; object-fit: cover; }
    .card-content { padding: 20px; }
    .game-cat { color: var(--primary-purple); font-size: 0.7rem; font-weight: 900; }
    .card-content h3 { font-size: 1.3rem; margin: 10px 0; }
    .card-footer { display: flex; justify-content: space-between; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 15px; }
    .status { color: #00ff88; font-size: 0.8rem; font-weight: 600; }
    .card-inner:hover { transform: translateY(-10px); border-color: var(--primary-purple); }

    /* --- SIDEBAR --- */
    .sidebar-box { background: var(--glass-bg); border: 1px solid rgba(255,255,255,0.05); border-radius: 30px; padding: 25px; margin-bottom: 30px; }
    .latest-list { display: flex; flex-direction: column; gap: 15px; margin: 25px 0; }
    .latest-item { display: flex; gap: 15px; padding: 10px; border-radius: 15px; background: rgba(255,255,255,0.02); transition: 0.3s; }
    .latest-item:hover { background: rgba(138, 79, 255, 0.1); transform: translateX(5px); }
    .latest-thumb { width: 60px; height: 60px; border-radius: 10px; overflow: hidden; }
    .latest-thumb img { width: 100%; height: 100%; object-fit: cover; }
    .latest-info h4 { margin: 0; font-size: 0.9rem; }
    .latest-meta { display: flex; gap: 10px; font-size: 0.7rem; margin-top: 5px; }
    .version { color: var(--primary-purple); font-weight: 800; }
    .btn-sidebar { display: block; text-align: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; font-weight: 700; border: 1px solid rgba(255,255,255,0.1); }

    .discord-card { background: linear-gradient(135deg, #5865F2, #3a44a7); padding: 30px; border-radius: 30px; text-align: center; }
    .discord-card i { font-size: 3rem; margin-bottom: 15px; }
    .btn-discord { display: inline-block; background: white; color: #5865F2; padding: 10px 25px; border-radius: 10px; font-weight: 800; margin-top: 15px; }

    @media (max-width: 1100px) {
        .grid-layout { grid-template-columns: 1fr; }
        .hero-flex { grid-template-columns: 1fr; text-align: center; }
        .hero-btns { justify-content: center; }
        .hero-visual { display: none; }
    }
</style>

<script>
    // Logique de recherche simple
    const searchInput = document.getElementById('gameSearch');
    const cards = document.querySelectorAll('.game-card');

    searchInput?.addEventListener('input', (e) => {
        const val = (e.target as HTMLInputElement).value.toLowerCase();
        cards.forEach(card => {
            const title = card.querySelector('h3')?.textContent?.toLowerCase();
            (card as HTMLElement).style.display = title?.includes(val) ? 'block' : 'none';
        });
    });
</script>